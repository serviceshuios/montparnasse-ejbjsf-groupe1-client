<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core">
<h:head>
	<meta charset="UTF-8" />
	<title>Acheter un lot</title>
	<h:outputStylesheet library="css" name="bootstrap.css" />
</h:head>
<head>
<div class="container">
	<h:outputLink value="personne.xhtml"
		class="btn btn-primary text-warning">CRUD PERSONNE</h:outputLink>
	<h:outputLink value="lot.xhtml" class="btn btn-primary text-warning">CRUD LOTISSEMENT</h:outputLink>
	<h:outputLink value="mariage.xhtml"
		class="btn btn-primary text-warning">MARIAGE</h:outputLink>
	<h:outputLink value="acheterLot.xhtml"
		class="btn btn-primary text-warning">ACHAT LOTISSEMENT</h:outputLink>
</div>
</head>
<body>
	<div class="container">

		<h:form>
			
			<h2>Personnes</h2>
			<h:panelGrid columns="2" cellpadding="5">
				<h:outputLabel value="Personnes disponbles" />
				<h:selectOneMenu id="personne" value="#{lotissementBean.personne.idPersonne}">
					<f:selectItem itemValue="0" itemLabel="Choisissez une personne" />
					<f:selectItems value="#{lotissementBean.getPersonnes()}" var="p" 
					itemValue="#{p.idPersonne}" itemLabel="#{p.nom}, #{p.prenom}" />
				</h:selectOneMenu>
			</h:panelGrid>
			<h2>Achat d'un lotissement</h2>
			<h:panelGrid columns="2" cellpadding="5">
				<h:outputLabel value="Lotissements disponibles" />
				<h:selectOneMenu id="lotissement" value="#{lotissementBean.lotissement.idLot}">
					<f:selectItem itemValue="0" itemLabel="Choisissez un lot" />
					<f:selectItems value="#{lotissementBean.listerLotissements()}" var="p" 
					itemValue="#{p.idLot}" itemLabel="#{p.numLot}, #{p.adresseLot}, #{p.dateCreation}, #{p.prix}" />
				</h:selectOneMenu>
			</h:panelGrid>

			<h:commandButton action="#{lotissementBean.acheterLotissement()}" value="acheter">
<!-- 				<f:setPropertyActionListener -->
<!-- 								target="#{lotissementBean.personne.idPersonne}" -->
<!-- 								value="#{personneBean.personne.idPersonne}"></f:setPropertyActionListener> -->
			</h:commandButton>


			<div>
				<h2>Liste des personnes</h2>
				<h:dataTable value="#{lotissementBean.listerLotissements()}" var="l"
					border="1" class="table table-striped">
					<h:column>
						<f:facet name="header">ID</f:facet>
						<h:outputText value="#{l.idLot}" />
					</h:column>
					<h:column>
						<f:facet name="header">NUM</f:facet>
						<h:outputText value="#{l.numLot}" />
					</h:column>
					<h:column>
						<f:facet name="header">ADRESSE</f:facet>
						<h:outputText value="#{l.adresseLot}" />
					</h:column>
					<h:column>
						<f:facet name="header">DateCreation</f:facet>
						<h:outputText value="#{l.dateCreation}" />
					</h:column>
					<h:column>
						<f:facet name="header">Prix</f:facet>
						<h:outputText value="#{l.prix}" />
					</h:column>
					<h:column>
						<f:facet name="header">Personne</f:facet>
						<h:outputText value="#{l.personne.nom}" />
					</h:column>
					
				</h:dataTable>
			</div>
		</h:form>
	</div>
	
</body>
</html>