<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core">
<h:head>
	<meta charset="UTF-8" />
	<title>Lotissement</title>
	<h:outputStylesheet library="css" name="bootstrap.css" />
</h:head>
<body>
	<div class="container">
		<h1>Inscription d'un lotissement</h1>
	<h:form>
		<h:panelGrid columns="2" cellpadding="5">
			<h:outputLabel value="Nom du Lot" />
			<h:inputText id="nomLot" value="#{lotissementBean.lotissement.nomLot}" />
			<h:outputLabel value="Adresse du Lot" />
			<h:inputText id="adresseLot" value="#{lotissementBean.lotissement.adresseLot}" />
			<h:outputLabel value="Date de Creation" />
			<h:inputText id="dateCreation" value="#{lotissementBean.lotissement.dateCreation}">
			<f:convertDateTime />
			</h:inputText>
			<h:outputLabel value="Prix" />
			<h:inputText id="prix" value="#{lotissementBean.lotissement.prix}" />
			<br/>
			
			<h:outputLabel value="Appartient à :" />
				<h:selectOneMenu value="#{personneBean.personne.idPersonne}">
				<f:selectItem itemValue="0" itemLabel="Choisissez une personne"/>
				<f:selectItems value="#{personneBean.listerPersonnes()}" var="p" itemValue="#{p.idPersonne}" itemLabel="#{p.nom}, #{p.prenom}"/>
			</h:selectOneMenu>
		</h:panelGrid>
		
		<h:commandButton action="#{lotissementBean.ajouterLotissement}" value="ajouter" />
		
		<br/>
		<h2>Liste des personnes</h2>
		<h:dataTable  value="#{lotissementBean.listerPersonnes()}" var="l" border="1" class="table table-striped">
		<h:column>
			<f:facet name="header">ID</f:facet>
			<h:outputText value="#{l.idLot}"/>
		</h:column>
		<h:column>
			<f:facet name="header">NOM du LOT</f:facet>
			<h:outputText value="#{l.nomLot}"/>
		</h:column>
		<h:column>
			<f:facet name="header">ADRESSE</f:facet>
			<h:outputText value="#{l.adresseLot}"/>
		</h:column>
		<h:column>
			<f:facet name="header">Prix</f:facet>
			<h:outputText value="#{l.prix}"/>
		</h:column>
		<h:column>
			<f:facet name="header">Appartient à::</f:facet>
			<h:outputText value="#{l.personne.nom}"/>
		</h:column>
		<h:column>
			<f:facet name="header">Supprimer</f:facet>
			<h:commandLink action="#{lotissementBean.supprimerLotissement(l.idLot)}" value="Supprimer">
			<f:setPropertyActionListener value="#{l.idLot}" target="#{lotissementBean.lotissement.idLot}"></f:setPropertyActionListener>
			</h:commandLink>
		</h:column>
		<h:column>
			<f:facet name="header">Modifier</f:facet>
			<h:commandLink action="#{lotissementBean.getLotissement(l.idLot)}" value="Modifier">
			<f:setPropertyActionListener target="#{lotissementBean.lotissement}" value="#{l}"></f:setPropertyActionListener>
			</h:commandLink>
		</h:column>
		</h:dataTable>
	</h:form>
	</div>
</body>
</html>